<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶…çº§ä¸ªä½“å®šä½å™¨ | ä¸“ä¸šå››è±¡é™æµ‹è¯„</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; 
        }
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            padding: 20px; 
        }
        .container { 
            max-width: 1000px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 20px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); 
            overflow: hidden; 
        }
        
        /* å¤´éƒ¨ */
        header { 
            background: linear-gradient(90deg, #4f46e5, #7c3aed); 
            color: white; 
            padding: 30px; 
            text-align: center; 
        }
        h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .subtitle { opacity: 0.9; font-size: 1.1rem; }
        
        /* è¿›åº¦æ¡ */
        .progress-bar { height: 6px; background: #e5e7eb; }
        .progress { height: 100%; background: #10b981; width: 0%; transition: width 0.5s; }
        
        /* é¡µé¢æ§åˆ¶ */
        .page { display: none; padding: 30px; }
        .active { display: block; }
        
        /* é¢˜ç›®ç±»å‹æ ‡ç­¾ */
        .question-type-label {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
            vertical-align: middle;
        }
        .type-single { background: #10b981; color: white; }
        .type-multiple { background: #3b82f6; color: white; }
        .type-slider { background: #8b5cf6; color: white; }
        .type-sort { background: #f59e0b; color: white; }
        
        /* é—®é¢˜æ ·å¼ */
        .question-group { 
            margin-bottom: 25px; 
            padding: 20px; 
            background: #f9fafb; 
            border-radius: 12px; 
            border-left: 4px solid #4f46e5; 
            position: relative;
        }
        h3 { color: #1f2937; margin-bottom: 10px; }
        .question-hint { 
            color: #6b7280; 
            margin-bottom: 15px; 
            font-size: 0.95rem; 
            padding: 8px 12px;
            background: rgba(255,255,255,0.7);
            border-radius: 6px;
            display: inline-block;
        }
        
        /* é€‰é¡¹æ ·å¼ - å¢å¼ºè§†è§‰åŒºåˆ† */
        .option { 
            padding: 15px; 
            margin: 8px 0; 
            background: white; 
            border: 2px solid #d1d5db; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.2s; 
            position: relative;
        }
        .option:hover { border-color: #4f46e5; background: #f5f3ff; }
        .option.selected { background: #4f46e5; color: white; border-color: #4f46e5; }
        
        /* å•é€‰/å¤šé€‰å›¾æ ‡ */
        .option-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            margin-right: 10px;
            text-align: center;
            line-height: 16px;
            font-size: 12px;
            transition: all 0.2s;
        }
        .option.selected .option-icon {
            background: white;
            color: #4f46e5;
            border-color: white;
        }
        .option.multiple .option-icon { border-radius: 4px; }
        
        /* æ»‘å—æ ·å¼ */
        .slider-container { margin: 20px 0; }
        .slider { 
            width: 100%; 
            height: 8px; 
            -webkit-appearance: none; 
            appearance: none; 
            background: linear-gradient(to right, #ef4444, #f59e0b, #10b981); 
            border-radius: 4px; 
            outline: none; 
        }
        .slider::-webkit-slider-thumb { 
            -webkit-appearance: none; 
            appearance: none; 
            width: 24px; 
            height: 24px; 
            border-radius: 50%; 
            background: #4f46e5; 
            cursor: pointer; 
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .slider-labels { 
            display: flex; 
            justify-content: space-between; 
            margin-top: 10px; 
            color: #6b7280; 
            font-size: 0.9rem; 
        }
        
        /* æ’åºé¢˜æ ·å¼ - å¢å¼ºè§†è§‰åŒºåˆ† */
        .sort-container { 
            background: white; 
            padding: 20px; 
            border-radius: 8px; 
            border: 1px solid #e5e7eb; 
            margin: 15px 0;
        }
        .sort-instruction {
            color: #6b7280;
            font-size: 0.9rem;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8fafc;
            border-radius: 6px;
            border-left: 3px solid #f59e0b;
        }
        .sort-list { 
            min-height: 200px; 
            position: relative;
        }
        
        /* æ’åºé¢˜é¡¹ç›® - ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ† */
        .sort-item { 
            background: white; 
            padding: 15px; 
            margin-bottom: 10px; 
            border: 2px solid #e5e7eb; 
            border-radius: 8px; 
            cursor: move; 
            transition: all 0.2s; 
            display: flex;
            align-items: center;
            position: relative;
        }
        .sort-item:hover { border-color: #4f46e5; transform: translateY(-2px); box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .sort-item.dragging { opacity: 0.5; box-shadow: 0 6px 12px rgba(0,0,0,0.15); }
        
        /* æ’åºé¢˜é¡¹ç›®é¢œè‰²åŒºåˆ† */
        .sort-item:nth-child(5n+1) { border-left: 4px solid #10b981; }
        .sort-item:nth-child(5n+2) { border-left: 4px solid #3b82f6; }
        .sort-item:nth-child(5n+3) { border-left: 4px solid #f59e0b; }
        .sort-item:nth-child(5n+4) { border-left: 4px solid #ef4444; }
        .sort-item:nth-child(5n) { border-left: 4px solid #8b5cf6; }
        
        .sort-item .drag-handle { 
            width: 20px; 
            height: 20px; 
            margin-right: 12px; 
            color: #9ca3af; 
            cursor: move;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .sort-item .item-number {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 12px;
            font-size: 0.9rem;
        }
        .sort-item .item-content { 
            flex: 1; 
            font-weight: 500;
        }
        .sort-item .item-icon {
            width: 24px;
            height: 24px;
            background: #f3f4f6;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            color: #6b7280;
            font-size: 0.8rem;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn { 
            padding: 12px 30px; 
            border: none; 
            border-radius: 8px; 
            font-weight: 600; 
            cursor: pointer; 
            transition: all 0.2s; 
        }
        .btn-primary { background: #4f46e5; color: white; }
        .btn-primary:hover { background: #4338ca; }
        .btn-success { background: #10b981; color: white; }
        .btn-success:hover { background: #0da271; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        .btn-warning { background: #f59e0b; color: white; }
        .btn-warning:hover { background: #d97706; }
        
        /* å¯¼èˆª */
        .nav { 
            display: flex; 
            justify-content: space-between; 
            margin-top: 30px; 
            padding-top: 20px; 
            border-top: 1px solid #e5e7eb; 
        }
        
        /* å››è±¡é™å›¾ */
        .quadrant-chart { 
            width: 350px; 
            height: 350px; 
            margin: 20px auto; 
            position: relative; 
            border: 2px solid #374151; 
        }
        .quadrant-label { 
            position: absolute; 
            font-weight: bold; 
            font-size: 1.1rem; 
        }
        .q1-label { top: 20px; left: 20px; color: #10b981; }
        .q2-label { top: 20px; right: 20px; color: #3b82f6; }
        .q3-label { bottom: 20px; left: 20px; color: #f59e0b; }
        .q4-label { bottom: 20px; right: 20px; color: #ef4444; }
        .quadrant-point { 
            position: absolute; 
            width: 16px; 
            height: 16px; 
            background: #7c3aed; 
            border-radius: 50%; 
            border: 3px solid white; 
            box-shadow: 0 0 0 2px #7c3aed; 
        }
        
        /* æŠ¥å‘Šé¡µ */
        .report-page { 
            padding: 40px; 
            margin-bottom: 20px; 
            background: white; 
            border-radius: 10px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            page-break-after: always;
        }
        .report-cover { 
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%); 
            color: white; 
            text-align: center; 
            padding: 60px 40px;
            border-radius: 15px;
        }
        
        /* å‡çº§é€‰é¡¹ */
        .upgrade-section { 
            background: linear-gradient(135deg, #fef3c7, #fde68a); 
            padding: 25px; 
            border-radius: 12px; 
            margin: 30px 0; 
            text-align: center;
            border: 2px solid #f59e0b;
        }
        
        /* åé¦ˆå…¥å£ */
        .feedback-section { 
            background: #f0f9ff; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 20px 0; 
            text-align: center;
            border: 1px solid #dbeafe;
        }
        
        /* æ•°æ®ç®¡ç†ç•Œé¢ */
        .data-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #4f46e5;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        /* æ¨¡æ€æ¡† */
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1000; 
            align-items: center; 
            justify-content: center; 
        }
        .modal-content { 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            max-width: 500px; 
            width: 90%; 
            max-height: 80vh; 
            overflow-y: auto; 
        }
        
        /* ç®¡ç†å‘˜é¢æ¿ */
        .admin-panel {
            background: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }
        
        /* å½“å‰é¢˜ç›®æ ‡è¯† */
        .current-question {
            position: absolute;
            top: -10px;
            right: 20px;
            background: #4f46e5;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        /* é€‰é¡¹æè¿°æ ·å¼ */
        .option-desc {
            font-size: 0.9rem;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .container { border-radius: 10px; }
            .quadrant-chart { width: 300px; height: 300px; }
            .data-stats { grid-template-columns: 1fr 1fr; }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ§­ è¶…çº§ä¸ªä½“å®šä½å™¨</h1>
            <p class="subtitle">å››è±¡é™ä¸“ä¸šæµ‹è¯„ Â· è§†è§‰ä¼˜åŒ–ç‰ˆ</p>
        </header>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <!-- é¡µé¢1: æ¬¢è¿é¡µ -->
        <div id="page-welcome" class="page active">
            <div style="text-align: center; padding: 20px;">
                <h2 style="color: #4f46e5; margin-bottom: 20px;">ğŸ” å‘ç°ä½ çš„ç»å¯¹ä¼˜åŠ¿</h2>
                <p style="line-height: 1.6; margin-bottom: 30px; color: #4b5563;">
                    é€šè¿‡12ä¸ªç»´åº¦çš„ç§‘å­¦è¯„ä¼°ï¼Œç²¾å‡†å®šä½ä½ åœ¨å››è±¡é™æ¨¡å‹ä¸­çš„ä½ç½®ï¼Œ<br>
                    è·å¾—ä¸ªæ€§åŒ–å‘å±•å»ºè®®å’Œ10é¡µä¸“ä¸šæŠ¥å‘Šã€‚
                </p>
                
                <!-- æ•°æ®æ”¶é›†å£°æ˜ -->
                <div class="feedback-section">
                    <p style="color: #1e40af; margin-bottom: 10px;">
                        <i class="fas fa-database"></i> æ•°æ®æ”¶é›†è¯´æ˜
                    </p>
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.5;">
                        æœ¬æµ‹è¯„å°†åŒ¿åæ”¶é›†æµ‹è¯•ç»“æœï¼Œç”¨äºåˆ†æå’Œæ”¹è¿›æµ‹è¯„å·¥å…·ã€‚<br>
                        æ‰€æœ‰æ•°æ®å°†ä¸¥æ ¼ä¿å¯†ï¼Œä»…ç”¨äºç»Ÿè®¡åˆ†æã€‚
                    </p>
                </div>
                
                <!-- å››è±¡é™å›¾ç¤º -->
                <div style="display: flex; justify-content: center; margin: 30px 0;">
                    <div style="width: 300px; height: 300px; border: 2px solid #374151; position: relative;">
                        <div style="position: absolute; width: 100%; height: 2px; background: #374151; top: 50%;"></div>
                        <div style="position: absolute; width: 2px; height: 100%; background: #374151; left: 50%;"></div>
                        <div style="position: absolute; top: 20px; left: 20px; color: #10b981; font-weight: bold; font-size: 0.9rem;">æˆ˜ç•¥åˆ›æ–°è€…</div>
                        <div style="position: absolute; top: 20px; right: 20px; color: #3b82f6; font-weight: bold; font-size: 0.9rem;">äººé™…å½±å“è€…</div>
                        <div style="position: absolute; bottom: 20px; left: 20px; color: #f59e0b; font-weight: bold; font-size: 0.9rem;">æŠ€æœ¯æ‰§è¡Œè€…</div>
                        <div style="position: absolute; bottom: 20px; right: 20px; color: #ef4444; font-weight: bold; font-size: 0.9rem;">è¿è¥åè°ƒè€…</div>
                    </div>
                </div>
                
                <div style="text-align: left; max-width: 500px; margin: 0 auto 30px;">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">ä½ å°†è·å¾—ï¼š</h4>
                    <div style="background: #f0f9ff; padding: 20px; border-radius: 10px;">
                        <p><span style="color: #10b981; font-weight: bold;">âœ“</span> å››è±¡é™ç²¾å‡†å®šä½åˆ†æ</p>
                        <p><span style="color: #10b981; font-weight: bold;">âœ“</span> 10é¡µä¸“ä¸šå‘å±•æŠ¥å‘Šï¼ˆå¯ä¿å­˜ä¸ºPDFï¼‰</p>
                        <p><span style="color: #10b981; font-weight: bold;">âœ“</span> ä¸ªæ€§åŒ–å‘å±•å»ºè®®ä¸è¡ŒåŠ¨è®¡åˆ’</p>
                        <p><span style="color: #10b981; font-weight: bold;">âœ“</span> 90å¤©æˆé•¿è·¯çº¿å›¾</p>
                    </div>
                </div>
                
                <button id="start-btn" class="btn btn-primary" style="padding: 15px 40px; font-size: 1.1rem; margin-bottom: 20px;">
                    å¼€å§‹æµ‹è¯„ (çº¦10-12åˆ†é’Ÿ)
                </button>
                
                <!-- ç®¡ç†å‘˜å…¥å£ -->
                <div style="margin-top: 20px;">
                    <button onclick="showAdminPanel()" class="btn btn-secondary" style="padding: 8px 20px; font-size: 0.9rem;">
                        <i class="fas fa-cog"></i> ç®¡ç†å‘˜å…¥å£
                    </button>
                </div>
            </div>
        </div>
        
        <!-- é¡µé¢2: æµ‹è¯„é—®é¢˜ -->
        <div id="page-questions" class="page">
            <div id="questions-container"></div>
            <div class="nav">
                <button id="prev-btn" class="btn btn-secondary" onclick="prevQuestion()">ä¸Šä¸€é¢˜</button>
                <button id="next-btn" class="btn btn-primary" onclick="nextQuestion()">ä¸‹ä¸€é¢˜</button>
            </div>
        </div>
        
        <!-- é¡µé¢3: ç»“æœé¡µ -->
        <div id="page-result" class="page">
            <div style="text-align: center;">
                <h2 style="color: #4f46e5; margin-bottom: 20px;">ğŸ¯ ä½ çš„å››è±¡é™å®šä½</h2>
                
                <div id="result-content" style="margin-bottom: 30px;">
                    <!-- ç»“æœå°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <!-- æ•°æ®æ”¶é›†æˆåŠŸæç¤º -->
                <div id="data-success" style="display: none; background: #f0fdf4; color: #166534; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
                    <i class="fas fa-check-circle"></i> æ‚¨çš„æµ‹è¯„æ•°æ®å·²æˆåŠŸä¿å­˜ï¼æ„Ÿè°¢å‚ä¸ã€‚
                </div>
                
                <!-- å‡çº§é€‰é¡¹ -->
                <div class="upgrade-section">
                    <h3 style="color: #92400e; margin-bottom: 15px;">âœ¨ å‡çº§ä¸ºä¸“ä¸šé¡¾é—®æœåŠ¡</h3>
                    <p style="color: #78350f; margin-bottom: 20px;">
                        å…è´¹æŠ¥å‘Šæä¾›äº†æ–¹å‘ï¼Œä¸“ä¸šé¡¾é—®å¸®ä½ ç»˜åˆ¶ç²¾ç¡®çš„æ–½å·¥å›¾ã€‚
                    </p>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px auto; max-width: 400px;">
                        <h4 style="color: #d97706; margin-bottom: 15px;">"è¶…çº§ä¸ªä½“"å¯åŠ¨å’¨è¯¢</h4>
                        <div style="text-align: left; margin-bottom: 20px;">
                            <p><span style="color: #10b981; font-weight: bold;">âœ“</span> 30åˆ†é’Ÿä¸€å¯¹ä¸€æ·±åº¦è§£è¯»æŠ¥å‘Š</p>
                            <p><span style="color: #10b981; font-weight: bold;">âœ“</span> å®šåˆ¶90å¤©è¡ŒåŠ¨è®¡åˆ’è¡¨</p>
                            <p><span style="color: #10b981; font-weight: bold;">âœ“</span> æ¨èç²¾å‡†å­¦ä¹ èµ„æºä¸å·¥å…·</p>
                            <p><span style="color: #10b981; font-weight: bold;">âœ“</span> 3æ¬¡é‚®ä»¶è·Ÿè¿›æ”¯æŒ</p>
                        </div>
                        
                        <div style="margin: 20px 0;">
                            <p style="font-size: 0.9rem; color: #6b7280;">åŸä»·ï¼š<s>299å…ƒ</s></p>
                            <p style="font-size: 1.5rem; color: #d97706; font-weight: bold;">é™æ—¶ä½“éªŒä»·ï¼š99å…ƒ</p>
                        </div>
                        
                        <button class="btn btn-warning" onclick="showConsultationModal()" style="padding: 12px 30px;">
                            ç«‹å³é¢„çº¦å’¨è¯¢
                        </button>
                        
                        <p style="font-size: 0.9rem; color: #92400e; margin-top: 15px;">
                            æ‰«ç æ·»åŠ å¾®ä¿¡ï¼Œå¤‡æ³¨"å’¨è¯¢"å³å¯é¢„çº¦
                        </p>
                    </div>
                </div>
                
                <!-- åé¦ˆå…¥å£ -->
                <div class="feedback-section">
                    <h4 style="color: #1e40af; margin-bottom: 10px;">ğŸ’¬ å¸®åŠ©æ”¹è¿›è¿™ä¸ªå·¥å…·</h4>
                    <p style="color: #4b5563; font-size: 0.95rem; margin-bottom: 15px;">
                        å®Œæˆæµ‹è¯„åï¼Œæ¬¢è¿æ‰«ç åŠ å…¥åé¦ˆç¾¤<br>
                        ä½ çš„å»ºè®®ä¼šè®©å·¥å…·å˜å¾—æ›´å¥½ï¼
                    </p>
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn btn-success" onclick="generateReport()" style="padding: 12px 30px; margin-right: 10px;">
                        ç”Ÿæˆä¸“ä¸šæŠ¥å‘Š
                    </button>
                    <button class="btn btn-secondary" onclick="restartTest()">
                        é‡æ–°æµ‹è¯„
                    </button>
                </div>
            </div>
        </div>
        
        <!-- é¡µé¢4: æŠ¥å‘Šé¡µ -->
        <div id="page-report" class="page">
            <div id="report-container"></div>
            <div style="text-align: center; margin: 30px 0;">
                <button onclick="printReport()" class="btn btn-success" style="margin-right: 10px;">
                    æ‰“å°/ä¿å­˜ä¸ºPDF
                </button>
                <button onclick="showResultPage()" class="btn btn-secondary">
                    è¿”å›ç»“æœé¡µ
                </button>
            </div>
        </div>
        
        <!-- é¡µé¢5: ç®¡ç†å‘˜é¢æ¿ -->
        <div id="page-admin" class="page">
            <div style="padding: 20px;">
                <h2 style="color: #4f46e5; margin-bottom: 20px;">ğŸ“Š æ•°æ®ç®¡ç†ç³»ç»Ÿ</h2>
                
                <div class="admin-panel">
                    <h3 style="color: #1f2937; margin-bottom: 20px;">æ•°æ®ç»Ÿè®¡æ¦‚è§ˆ</h3>
                    
                    <div class="data-stats">
                        <div class="stat-card">
                            <div class="stat-value" id="total-responses">0</div>
                            <div class="stat-label">æ€»æµ‹è¯•äººæ•°</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="today-responses">0</div>
                            <div class="stat-label">ä»Šæ—¥æ–°å¢</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="avg-score">0</div>
                            <div class="stat-label">å¹³å‡åˆ†</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="q1-count">0</div>
                            <div class="stat-label">ç¬¬ä¸€è±¡é™äººæ•°</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">æ•°æ®æ“ä½œ</h4>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
                            <button onclick="exportData('json')" class="btn btn-success">
                                <i class="fas fa-file-code"></i> å¯¼å‡ºJSON
                            </button>
                            <button onclick="exportData('csv')" class="btn btn-success">
                                <i class="fas fa-file-csv"></i> å¯¼å‡ºCSV
                            </button>
                            <button onclick="clearAllData()" class="btn btn-secondary">
                                <i class="fas fa-trash"></i> æ¸…ç©ºæ•°æ®
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">æ•°æ®é¢„è§ˆï¼ˆæœ€è¿‘20æ¡ï¼‰</h4>
                        <div style="background: white; border-radius: 8px; overflow: auto; max-height: 300px;">
                            <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                                <thead>
                                    <tr style="background: #f8fafc;">
                                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">åºå·</th>
                                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">æ—¶é—´</th>
                                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">è±¡é™</th>
                                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb;">åˆ†æ•°</th>
                                    </tr>
                                </thead>
                                <tbody id="data-table-body">
                                    <!-- æ•°æ®è¡Œå°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="showWelcomePage()" class="btn btn-secondary">
                        è¿”å›é¦–é¡µ
                    </button>
                </div>
            </div>
        </div>
        
        <!-- å’¨è¯¢é¢„çº¦æ¨¡æ€æ¡† -->
        <div id="consultation-modal" class="modal">
            <div class="modal-content">
                <h3 style="color: #4f46e5; margin-bottom: 20px;">é¢„çº¦ä¸“ä¸šå’¨è¯¢</h3>
                <p style="color: #4b5563; margin-bottom: 20px;">è¯·å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†åœ¨24å°æ—¶å†…ä¸æ‚¨è”ç³»ç¡®è®¤å’¨è¯¢æ—¶é—´ã€‚</p>
                
                <div style="margin-bottom: 20px;">
                    <input type="text" id="name" placeholder="æ‚¨çš„å§“å" style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; margin-bottom: 15px;">
                    <input type="email" id="email" placeholder="ç”µå­é‚®ç®±" style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; margin-bottom: 15px;">
                    <input type="tel" id="phone" placeholder="æ‰‹æœºå·ï¼ˆå¯é€‰ï¼‰" style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; margin-bottom: 15px;">
                    
                    <div style="margin-bottom: 20px;">
                        <p style="color: #4b5563; margin-bottom: 10px;">åå¥½çš„å’¨è¯¢æ—¶é—´ï¼š</p>
                        <select id="time-preference" style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px;">
                            <option value="">è¯·é€‰æ‹©æ—¶é—´æ®µ</option>
                            <option value="weekday_morning">å·¥ä½œæ—¥ 9:00-12:00</option>
                            <option value="weekday_afternoon">å·¥ä½œæ—¥ 14:00-18:00</option>
                            <option value="weekday_evening">å·¥ä½œæ—¥ 19:00-21:00</option>
                            <option value="weekend">å‘¨æœ« 9:00-18:00</option>
                        </select>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button onclick="submitConsultation()" class="btn btn-primary" style="flex: 1;">æäº¤é¢„çº¦</button>
                    <button onclick="closeConsultationModal()" class="btn btn-secondary" style="flex: 1;">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
        
        <!-- ç®¡ç†å‘˜ç™»å½•æ¨¡æ€æ¡† -->
        <div id="admin-login-modal" class="modal">
            <div class="modal-content">
                <h3 style="color: #4f46e5; margin-bottom: 20px;">ç®¡ç†å‘˜ç™»å½•</h3>
                <p style="color: #4b5563; margin-bottom: 20px;">è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç </p>
                
                <div style="margin-bottom: 20px;">
                    <input type="password" id="admin-password" placeholder="ç®¡ç†å‘˜å¯†ç " style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; margin-bottom: 15px;">
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button onclick="loginAdmin()" class="btn btn-primary" style="flex: 1;">ç™»å½•</button>
                    <button onclick="closeAdminLoginModal()" class="btn btn-secondary" style="flex: 1;">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== å…¨å±€å˜é‡ ====================
        const CONFIG = {
            ADMIN_PASSWORD: "admin123", // ç®¡ç†å‘˜å¯†ç ï¼Œå¯ä»¥ä¿®æ”¹
            STORAGE_KEY: "super_individual_data_v2",
            CONSULTATION_KEY: "consultation_data_v2"
        };
        
        let currentPage = 0;
        let currentQuestion = 0;
        let userAnswers = {};
        let testData = {};
        let allTestData = [];
        let consultationData = [];
        
        // æµ‹è¯„é—®é¢˜
        const questions = [
            {
                id: 1,
                question: "æ€ç»´æ¨¡å¼åå¥½",
                hint: "é€‰æ‹©æœ€ç¬¦åˆä½ æ€ç»´æ–¹å¼çš„ä¸€é¡¹",
                type: "single",
                typeText: "å•é€‰é¢˜",
                options: [
                    { value: "abstract", text: "æŠ½è±¡æ€ç»´", desc: "å…³æ³¨æ¦‚å¿µã€ç†è®ºã€æœªæ¥å¯èƒ½æ€§" },
                    { value: "concrete", text: "å…·ä½“æ€ç»´", desc: "å…³æ³¨ç»†èŠ‚ã€äº‹å®ã€å®é™…åº”ç”¨" }
                ]
            },
            {
                id: 2,
                question: "è¡ŒåŠ¨é£æ ¼å€¾å‘",
                hint: "é¢å¯¹æ–°ä»»åŠ¡æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”é€šå¸¸æ˜¯ï¼Ÿ",
                type: "single",
                typeText: "å•é€‰é¢˜",
                options: [
                    { value: "plan", text: "å…ˆè§„åˆ’", desc: "åˆ¶å®šè¯¦ç»†è®¡åˆ’ï¼Œæ˜ç¡®æ­¥éª¤" },
                    { value: "action", text: "å…ˆè¡ŒåŠ¨", desc: "ç«‹å³å°è¯•ï¼Œè¾¹åšè¾¹è°ƒæ•´" }
                ]
            },
            {
                id: 3,
                question: "å†³ç­–ä¾èµ–åº¦",
                hint: "æ»‘åŠ¨æ»‘å—è¡¨ç¤ºä½ åšé‡è¦å†³å®šæ—¶çš„ä¾èµ–ç¨‹åº¦",
                type: "slider",
                typeText: "æ»‘å—é¢˜",
                min: 1,
                max: 10,
                default: 5,
                labels: ["ç›´è§‰æ„Ÿå—", "æ··åˆä¾èµ–", "æ•°æ®é€»è¾‘"]
            },
            {
                id: 4,
                question: "å·¥ä½œç¯å¢ƒåå¥½",
                hint: "ä½ æ›´å–œæ¬¢å“ªç§å·¥ä½œç¯å¢ƒï¼Ÿ",
                type: "single",
                typeText: "å•é€‰é¢˜",
                options: [
                    { value: "team", text: "å›¢é˜Ÿåä½œ", desc: "å–œæ¬¢è®¨è®ºã€åä½œã€é›†ä½“å†³ç­–" },
                    { value: "solo", text: "ç‹¬ç«‹å·¥ä½œ", desc: "å–œæ¬¢ä¸“æ³¨ã€è‡ªä¸»ã€ä¸ªäººè´Ÿè´£" }
                ]
            },
            {
                id: 5,
                question: "æŠ€æœ¯é€‚åº”èƒ½åŠ›",
                hint: "é¢å¯¹æ–°æŠ€æœ¯å·¥å…·ï¼Œä½ çš„æ€åº¦æ˜¯ï¼Ÿ",
                type: "slider",
                typeText: "æ»‘å—é¢˜",
                min: 1,
                max: 10,
                default: 5,
                labels: ["è°¨æ…ä¿å®ˆ", "é€‚åº¦å°è¯•", "ç§¯ææ‹¥æŠ±"]
            },
            {
                id: 6,
                question: "æ²Ÿé€šè¡¨è¾¾åå¥½",
                hint: "é€‰æ‹©ä½ æ“…é•¿æˆ–åå¥½çš„æ²Ÿé€šæ–¹å¼ï¼ˆå¯å¤šé€‰ï¼‰",
                type: "multiple",
                typeText: "å¤šé€‰é¢˜",
                options: [
                    { value: "write", text: "ä¹¦é¢è¡¨è¾¾", desc: "å†™ä½œã€æ–‡æ¡£ã€é‚®ä»¶" },
                    { value: "speak", text: "å£å¤´è¡¨è¾¾", desc: "æ¼”è®²ã€è®¨è®ºã€ä¼šè®®" },
                    { value: "visual", text: "è§†è§‰è¡¨è¾¾", desc: "å›¾è¡¨ã€æ¼”ç¤ºã€å¯è§†åŒ–" },
                    { value: "action", text: "è¡ŒåŠ¨ç¤ºèŒƒ", desc: "æ¼”ç¤ºã€æ‰‹æŠŠæ‰‹æ•™" }
                ]
            },
            {
                id: 7,
                question: "å­¦ä¹ å¸æ”¶æ¨¡å¼",
                hint: "ä½ å¦‚ä½•å­¦ä¹ æ–°çŸ¥è¯†æ•ˆæœæœ€å¥½ï¼Ÿ",
                type: "single",
                typeText: "å•é€‰é¢˜",
                options: [
                    { value: "theory", text: "ç†è®ºå…ˆè¡Œ", desc: "å…ˆæŒæ¡ç†è®ºæ¡†æ¶ï¼Œå†å®è·µ" },
                    { value: "practice", text: "å®è·µå…ˆè¡Œ", desc: "å…ˆåŠ¨æ‰‹å°è¯•ï¼Œå†æ€»ç»“ç†è®º" }
                ]
            },
            {
                id: 8,
                question: "é—®é¢˜è§£å†³å€¾å‘",
                hint: "é‡åˆ°éš¾é¢˜æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰",
                type: "multiple",
                typeText: "å¤šé€‰é¢˜",
                options: [
                    { value: "research", text: "æ·±å…¥ç ”ç©¶", desc: "æŸ¥èµ„æ–™ã€åˆ†æåŸå› " },
                    { value: "ask", text: "å¯»æ±‚å¸®åŠ©", desc: "è¯·æ•™ä»–äººã€å¯»æ‰¾ä¸“å®¶" },
                    { value: "try", text: "å°è¯•è§£å†³", desc: "è¯•é”™è°ƒæ•´ã€ä¸æ–­ä¼˜åŒ–" },
                    { value: "delegate", text: "å§”æ‰˜ä»–äºº", desc: "åˆ†å·¥åˆä½œã€å‘æŒ¥å›¢é˜Ÿä¼˜åŠ¿" }
                ]
            },
            {
                id: 9,
                question: "é£é™©æ‰¿å—èƒ½åŠ›",
                hint: "åœ¨ä¸ç¡®å®šæ€§é¢å‰ï¼Œä½ çš„æ€åº¦æ˜¯ï¼Ÿ",
                type: "slider",
                typeText: "æ»‘å—é¢˜",
                min: 1,
                max: 10,
                default: 5,
                labels: ["é£é™©è§„é¿", "é€‚åº¦å†’é™©", "é£é™©åå¥½"]
            },
            {
                id: 10,
                question: "æˆå°±æ„Ÿæ¥æº",
                hint: "ä»€ä¹ˆæœ€èƒ½ç»™ä½ å¸¦æ¥æˆå°±æ„Ÿï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰",
                type: "multiple",
                typeText: "å¤šé€‰é¢˜",
                options: [
                    { value: "achieve", text: "è¾¾æˆç›®æ ‡", desc: "å®ŒæˆæŒ‘æˆ˜ï¼Œè§£å†³é—®é¢˜" },
                    { value: "create", text: "åˆ›é€ åˆ›æ–°", desc: "åšå‡ºæ–°ä¸œè¥¿ï¼Œå‘æ˜æ–°æ–¹æ³•" },
                    { value: "help", text: "å¸®åŠ©ä»–äºº", desc: "æ”¯æŒåˆ«äººæˆé•¿ï¼Œæä¾›æœåŠ¡" },
                    { value: "learn", text: "å­¦ä¹ æŒæ¡", desc: "å­¦ä¼šæ–°çŸ¥è¯†ï¼ŒæŒæ¡æ–°æŠ€èƒ½" }
                ]
            },
            {
                id: 11,
                question: "å·¥ä½œä»·å€¼æ’åº",
                hint: "è¯·æŒ‰é‡è¦æ€§æ’åºï¼ˆæ‹–åŠ¨é¡¹ç›®é‡æ–°æ’åºï¼‰",
                type: "sort",
                typeText: "æ’åºé¢˜",
                options: [
                    { value: "meaning", text: "å·¥ä½œçš„æ„ä¹‰å’Œä»·å€¼", icon: "ğŸ¯" },
                    { value: "growth", text: "ä¸ªäººæˆé•¿å’Œå­¦ä¹ æœºä¼š", icon: "ğŸ“ˆ" },
                    { value: "income", text: "æ”¶å…¥æ°´å¹³å’Œç»æµå›æŠ¥", icon: "ğŸ’°" },
                    { value: "balance", text: "å·¥ä½œç”Ÿæ´»å¹³è¡¡", icon: "âš–ï¸" },
                    { value: "impact", text: "ç¤¾ä¼šå½±å“å’Œè®¤å¯åº¦", icon: "ğŸŒŸ" }
                ]
            },
            {
                id: 12,
                question: "å¿ƒæµä½“éªŒé¢†åŸŸ",
                hint: "ä½ åœ¨ä»€ä¹ˆæ´»åŠ¨ä¸­æœ€å®¹æ˜“è¿›å…¥\"å¿ƒæµ\"çŠ¶æ€ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰",
                type: "multiple",
                typeText: "å¤šé€‰é¢˜",
                options: [
                    { value: "analyze", text: "åˆ†ææ•°æ®/ç ”ç©¶é—®é¢˜", desc: "æ·±å…¥ç ”ç©¶å¤æ‚é—®é¢˜" },
                    { value: "design", text: "è®¾è®¡/åˆ›é€ /è‰ºæœ¯åˆ›ä½œ", desc: "åˆ›é€ æ–°äº‹ç‰©æˆ–è§£å†³æ–¹æ¡ˆ" },
                    { value: "teach", text: "æ•™å­¦/æŒ‡å¯¼/å¸®åŠ©ä»–äºº", desc: "ä¼ æˆçŸ¥è¯†ï¼Œå¸®åŠ©ä»–äººæˆé•¿" },
                    { value: "manage", text: "ç»„ç»‡/ç®¡ç†/åè°ƒèµ„æº", desc: "è§„åˆ’ã€åè°ƒã€ä¼˜åŒ–æµç¨‹" }
                ]
            }
        ];
        
        // ==================== åˆå§‹åŒ– ====================
        document.addEventListener('DOMContentLoaded', function() {
            // ç»‘å®šå¼€å§‹æŒ‰é’®
            document.getElementById('start-btn').addEventListener('click', startTest);
            
            // åŠ è½½å·²ä¿å­˜çš„æ•°æ®
            loadAllData();
            loadConsultationData();
            
            // åˆå§‹æ˜¾ç¤ºæ¬¢è¿é¡µ
            showPage('page-welcome');
        });
        
        // ==================== æ•°æ®ç®¡ç† ====================
        function loadAllData() {
            try {
                const data = localStorage.getItem(CONFIG.STORAGE_KEY);
                allTestData = data ? JSON.parse(data) : [];
            } catch (e) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', e);
                allTestData = [];
            }
        }
        
        function loadConsultationData() {
            try {
                const data = localStorage.getItem(CONFIG.CONSULTATION_KEY);
                consultationData = data ? JSON.parse(data) : [];
            } catch (e) {
                console.error('åŠ è½½å’¨è¯¢æ•°æ®å¤±è´¥:', e);
                consultationData = [];
            }
        }
        
        function saveTestData() {
            // ç”Ÿæˆå”¯ä¸€ID
            const id = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            
            // æ·»åŠ åˆ°æµ‹è¯•æ•°æ®
            const testRecord = {
                id: id,
                timestamp: new Date().toISOString(),
                quadrant: testData.quadrant,
                quadrantName: testData.quadrantName,
                score: testData.score,
                data: JSON.parse(JSON.stringify(userAnswers)),
                result: JSON.parse(JSON.stringify(testData))
            };
            
            allTestData.push(testRecord);
            localStorage.setItem(CONFIG.STORAGE_KEY, JSON.stringify(allTestData));
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            document.getElementById('data-success').style.display = 'block';
            
            return id;
        }
        
        // ==================== é¡µé¢æ§åˆ¶ ====================
        function showPage(pageName) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡é¡µé¢
            document.getElementById(pageName).classList.add('active');
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressBar();
            
            // è®¾ç½®å½“å‰é¡µé¢ç´¢å¼•
            if (pageName === 'page-welcome') currentPage = 0;
            else if (pageName === 'page-questions') currentPage = 1;
            else if (pageName === 'page-result') currentPage = 2;
            else if (pageName === 'page-report') currentPage = 3;
            else if (pageName === 'page-admin') currentPage = 4;
        }
        
        function updateProgressBar() {
            let progress = 0;
            if (currentPage === 0) progress = 0;
            else if (currentPage === 1) progress = (currentQuestion + 1) / questions.length * 50;
            else if (currentPage === 2) progress = 75;
            else if (currentPage === 3) progress = 100;
            else if (currentPage === 4) progress = 100;
            
            document.getElementById('progress').style.width = progress + '%';
        }
        
        // ==================== æµ‹è¯„é€»è¾‘ ====================
        function startTest() {
            currentQuestion = 0;
            userAnswers = {};
            showQuestion(currentQuestion);
            showPage('page-questions');
        }
        
        function showQuestion(index) {
            if (index < 0 || index >= questions.length) return;
            
            const q = questions[index];
            const container = document.getElementById('questions-container');
            
            // ç”Ÿæˆé—®é¢˜HTML
            let html = `
                <div class="question-group">
                    <div class="current-question">ç¬¬ ${index + 1} é¢˜ / å…± ${questions.length} é¢˜</div>
                    <h3>${q.question} 
                        <span class="question-type-label type-${q.type}">${q.typeText}</span>
                    </h3>
                    <p class="question-hint">${q.hint}</p>
                    <div id="options-container">
            `;
            
            if (q.type === 'single' || q.type === 'multiple') {
                // å•é€‰é¢˜æˆ–å¤šé€‰é¢˜
                q.options.forEach(option => {
                    const isSelected = userAnswers[q.id] && (
                        q.type === 'single' ? userAnswers[q.id] === option.value :
                        userAnswers[q.id].includes(option.value)
                    );
                    
                    const icon = q.type === 'single' ? 'â—‹' : 'â–¡';
                    const selectedIcon = q.type === 'single' ? 'â—' : 'âœ“';
                    
                    html += `
                        <div class="option ${q.type === 'multiple' ? 'multiple' : ''} ${isSelected ? 'selected' : ''}" 
                             onclick="selectOption('${q.id}', '${option.value}', '${q.type}')">
                            <span class="option-icon">${isSelected ? selectedIcon : icon}</span>
                            <div>
                                <div style="font-weight: 600; margin-bottom: 5px;">${option.text}</div>
                                <div class="option-desc">${option.desc}</div>
                            </div>
                        </div>
                    `;
                });
            } else if (q.type === 'slider') {
                // æ»‘å—é¢˜
                const value = userAnswers[q.id] || q.default;
                html += `
                    <div class="slider-container">
                        <input type="range" min="${q.min}" max="${q.max}" value="${value}" 
                               class="slider" id="slider-${q.id}" oninput="updateSliderValue(${q.id}, this.value)">
                        <div class="slider-labels">
                            <span>${q.labels[0]}</span>
                            <span>${q.labels[1]}</span>
                            <span>${q.labels[2]}</span>
                        </div>
                        <div style="text-align: center; margin-top: 10px; color: #4f46e5; font-weight: bold;">
                            å½“å‰å€¼: ${value}
                        </div>
                    </div>
                `;
            } else if (q.type === 'sort') {
                // æ’åºé¢˜ - å¢å¼ºè§†è§‰åŒºåˆ†
                const currentOrder = userAnswers[q.id] || q.options.map(opt => opt.value);
                html += `
                    <div class="sort-container">
                        <div class="sort-instruction">
                            <i class="fas fa-info-circle"></i> æ‹–åŠ¨é¡¹ç›®é‡æ–°æ’åºï¼ˆæœ€é‡è¦çš„æ”¾æœ€ä¸Šé¢ï¼‰
                        </div>
                        <div id="sort-list-${q.id}" class="sort-list">
                `;
                
                currentOrder.forEach((value, index) => {
                    const option = q.options.find(opt => opt.value === value);
                    if (option) {
                        html += `
                            <div class="sort-item" data-value="${option.value}" draggable="true"
                                 ondragstart="dragStart(event)" ondragover="dragOver(event)" ondrop="dropItem('${q.id}', event)">
                                <div class="drag-handle">
                                    <i class="fas fa-grip-vertical"></i>
                                </div>
                                <div class="item-number">${index + 1}</div>
                                <div class="item-content">${option.text}</div>
                                <div class="item-icon">${option.icon || 'ğŸ“‹'}</div>
                            </div>
                        `;
                    }
                });
                
                html += `</div></div>`;
            }
            
            html += `</div></div>`;
            container.innerHTML = html;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            updateNavButtons();
        }
        
        function selectOption(questionId, value, type) {
            if (!userAnswers[questionId]) {
                userAnswers[questionId] = type === 'single' ? value : [value];
            } else {
                if (type === 'single') {
                    userAnswers[questionId] = value;
                } else {
                    const answers = userAnswers[questionId];
                    const index = answers.indexOf(value);
                    if (index === -1) {
                        answers.push(value);
                    } else {
                        answers.splice(index, 1);
                    }
                }
            }
            
            // é‡æ–°æ˜¾ç¤ºå½“å‰é—®é¢˜ä»¥æ›´æ–°é€‰ä¸­çŠ¶æ€
            showQuestion(currentQuestion);
        }
        
        function updateSliderValue(questionId, value) {
            userAnswers[questionId] = parseInt(value);
            
            // æ›´æ–°æ˜¾ç¤ºå€¼
            const slider = document.getElementById(`slider-${questionId}`);
            if (slider) {
                const display = slider.parentElement.querySelector('div:last-child');
                if (display) {
                    display.textContent = `å½“å‰å€¼: ${value}`;
                }
            }
        }
        
        // æ’åºé¢˜æ‹–æ”¾åŠŸèƒ½
        let draggedItem = null;
        
        function dragStart(e) {
            draggedItem = e.target.closest('.sort-item');
            if (draggedItem) {
                setTimeout(() => {
                    draggedItem.classList.add('dragging');
                }, 0);
            }
        }
        
        function dragOver(e) {
            e.preventDefault();
        }
        
        function dropItem(questionId, e) {
            e.preventDefault();
            const target = e.target.closest('.sort-item');
            const list = document.getElementById(`sort-list-${questionId}`);
            
            if (draggedItem && target && draggedItem !== target) {
                // è·å–æ‰€æœ‰é¡¹ç›®
                const items = Array.from(list.querySelectorAll('.sort-item'));
                const draggedIndex = items.indexOf(draggedItem);
                const targetIndex = items.indexOf(target);
                
                if (draggedIndex < targetIndex) {
                    target.after(draggedItem);
                } else {
                    target.before(draggedItem);
                }
                
                // æ›´æ–°æ’åº
                updateSortOrder(questionId);
            }
            
            if (draggedItem) {
                draggedItem.classList.remove('dragging');
                draggedItem = null;
            }
        }
        
        function updateSortOrder(questionId) {
            const items = document.querySelectorAll(`#sort-list-${questionId} .sort-item`);
            const order = Array.from(items).map(item => item.getAttribute('data-value'));
            userAnswers[questionId] = order;
            
            // æ›´æ–°åºå·
            items.forEach((item, index) => {
                const numberElement = item.querySelector('.item-number');
                if (numberElement) {
                    numberElement.textContent = index + 1;
                }
            });
        }
        
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                completeTest();
            }
        }
        
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }
        
        function updateNavButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.style.visibility = currentQuestion === 0 ? 'hidden' : 'visible';
            nextBtn.textContent = currentQuestion === questions.length - 1 ? 'å®Œæˆæµ‹è¯„' : 'ä¸‹ä¸€é¢˜';
        }
        
        // ==================== æµ‹è¯•å®Œæˆé€»è¾‘ ====================
        function completeTest() {
            // è®¡ç®—å››è±¡é™ç»“æœ
            calculateResult();
            
            // ä¿å­˜æ•°æ®
            saveTestData();
            
            // æ˜¾ç¤ºç»“æœé¡µ
            showResultPage();
        }
        
        function calculateResult() {
            // è®¡ç®—Xè½´ï¼šæ€ç»´å€¾å‘ï¼ˆæŠ½è±¡->å…·ä½“ï¼‰
            let xScore = 0;
            
            // q1: æŠ½è±¡æ€ç»´=-5, å…·ä½“æ€ç»´=5
            if (userAnswers[1] === 'abstract') xScore -= 5;
            else if (userAnswers[1] === 'concrete') xScore += 5;
            
            // q3: ç›´è§‰æ„Ÿå—=-5, æ•°æ®é€»è¾‘=5
            if (userAnswers[3]) {
                xScore += (userAnswers[3] - 5.5) * 0.8;
            }
            
            // q7: ç†è®ºå…ˆè¡Œ=-4, å®è·µå…ˆè¡Œ=4
            if (userAnswers[7] === 'theory') xScore -= 4;
            else if (userAnswers[7] === 'practice') xScore += 4;
            
            // è®¡ç®—Yè½´ï¼šäººé™…å…³ç³»å€¾å‘ï¼ˆäººæ–‡->æŠ€æœ¯ï¼‰
            let yScore = 0;
            
            // q4: å›¢é˜Ÿåä½œ=-4, ç‹¬ç«‹å·¥ä½œ=4
            if (userAnswers[4] === 'team') yScore -= 4;
            else if (userAnswers[4] === 'solo') yScore += 4;
            
            // q5: æŠ€æœ¯ä¿å®ˆ=-5, æŠ€æœ¯ç§¯æ=5
            if (userAnswers[5]) {
                yScore += (userAnswers[5] - 5.5) * 0.8;
            }
            
            // q6: å¦‚æœåŒ…å«"ä¹¦é¢è¡¨è¾¾"æˆ–"å£å¤´è¡¨è¾¾"æ›´åäººæ–‡
            if (userAnswers[6]) {
                if (userAnswers[6].includes('write') || userAnswers[6].includes('speak')) {
                    yScore -= 3;
                }
                // å¦‚æœåŒ…å«"è§†è§‰è¡¨è¾¾"æˆ–"è¡ŒåŠ¨ç¤ºèŒƒ"æ›´åæŠ€æœ¯
                if (userAnswers[6].includes('visual') || userAnswers[6].includes('action')) {
                    yScore += 3;
                }
            }
            
            // å½’ä¸€åŒ–åˆ° -8 åˆ° 8
            const x = Math.max(-8, Math.min(8, xScore));
            const y = Math.max(-8, Math.min(8, yScore));
            
            // ç¡®å®šè±¡é™
            let quadrant = 'center';
            let quadrantName = 'å¹³è¡¡å‘å±•è€…';
            let color = '#8b5cf6';
            
            if (x < 0 && y < 0) { quadrant = 'q1'; quadrantName = 'æˆ˜ç•¥åˆ›æ–°è€…'; color = '#10b981'; }
            else if (x > 0 && y < 0) { quadrant = 'q2'; quadrantName = 'äººé™…å½±å“è€…'; color = '#3b82f6'; }
            else if (x > 0 && y > 0) { quadrant = 'q3'; quadrantName = 'æŠ€æœ¯æ‰§è¡Œè€…'; color = '#f59e0b'; }
            else if (x < 0 && y > 0) { quadrant = 'q4'; quadrantName = 'è¿è¥åè°ƒè€…'; color = '#ef4444'; }
            
            // è®¡ç®—æ€»åˆ†
            let score = 50;
            score += Object.keys(userAnswers).length * 4;
            
            // æ ¹æ®æ»‘å—å€¼åŠ åˆ†
            if (userAnswers[3]) score += (userAnswers[3] - 5) * 2;
            if (userAnswers[5]) score += (userAnswers[5] - 5) * 2;
            if (userAnswers[9]) score += (userAnswers[9] - 5) * 2;
            
            // æ ¹æ®å¤šé€‰æ•°é‡åŠ åˆ†
            if (userAnswers[6]) score += userAnswers[6].length * 3;
            if (userAnswers[8]) score += userAnswers[8].length * 3;
            if (userAnswers[10]) score += userAnswers[10].length * 3;
            if (userAnswers[12]) score += userAnswers[12].length * 3;
            
            // å­˜å‚¨ç»“æœ
            testData = {
                quadrant: quadrant,
                quadrantName: quadrantName,
                color: color,
                score: Math.min(100, Math.max(0, Math.round(score))),
                x: x,
                y: y,
                answers: JSON.parse(JSON.stringify(userAnswers)),
                timestamp: new Date().toISOString()
            };
        }
        
        // ==================== ç»“æœæ˜¾ç¤º ====================
        function showResultPage() {
            const resultDiv = document.getElementById('result-content');
            const q = testData;
            
            // è®¡ç®—åœ¨å››è±¡é™å›¾ä¸­çš„ä½ç½®
            const chartSize = 350;
            const center = chartSize / 2;
            const xPos = center + (q.x / 8) * (center - 20);
            const yPos = center - (q.y / 8) * (center - 20);
            
            resultDiv.innerHTML = `
                <div style="text-align: center;">
                    <div class="quadrant-chart">
                        <div style="position: absolute; width: 100%; height: 2px; background: #374151; top: 50%;"></div>
                        <div style="position: absolute; width: 2px; height: 100%; background: #374151; left: 50%;"></div>
                        
                        <div class="quadrant-label q1-label">æˆ˜ç•¥åˆ›æ–°è€…</div>
                        <div class="quadrant-label q2-label">äººé™…å½±å“è€…</div>
                        <div class="quadrant-label q3-label">æŠ€æœ¯æ‰§è¡Œè€…</div>
                        <div class="quadrant-label q4-label">è¿è¥åè°ƒè€…</div>
                        
                        <div class="quadrant-point" style="left: ${xPos}px; top: ${yPos}px;"></div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h2 style="color: ${q.color}; margin-bottom: 10px;">${q.quadrantName}</h2>
                        <div style="font-size: 2.5rem; color: #4f46e5; font-weight: bold; margin: 10px 0;">${q.score}/100</div>
                        <p style="color: #4b5563; max-width: 500px; margin: 0 auto 20px; line-height: 1.6;">
                            ${getQuadrantDescription(q.quadrant)}
                        </p>
                    </div>
                </div>
                
                <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: left;">
                    <h4 style="color: #4f46e5; margin-bottom: 15px;">ä½ çš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</h4>
                    <ul style="color: #4b5563; line-height: 1.6; padding-left: 20px;">
                        ${getQuadrantStrengths(q.quadrant).map(s => `<li>${s}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            showPage('page-result');
        }
        
        function getQuadrantDescription(quadrant) {
            const descriptions = {
                'q1': 'ä½ æ“…é•¿æŠ½è±¡æ€è€ƒå’Œåˆ›æ–°æ„æƒ³ï¼Œå…³æ³¨äººæ–‡ä»·å€¼å’Œé•¿è¿œå½±å“ã€‚åœ¨æˆ˜ç•¥è§„åˆ’ã€äº§å“è®¾è®¡ã€å’¨è¯¢åˆ†æç­‰é¢†åŸŸæœ‰å¤©ç„¶ä¼˜åŠ¿ã€‚',
                'q2': 'ä½ æ“…é•¿äººé™…äº’åŠ¨å’Œå…·ä½“é—®é¢˜è§£å†³ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ²Ÿé€šåè°ƒï¼Œåœ¨å›¢é˜Ÿç®¡ç†ã€å®¢æˆ·å…³ç³»ã€åŸ¹è®­æ•™è‚²ç­‰é¢†åŸŸè¡¨ç°å‡ºè‰²ã€‚',
                'q3': 'ä½ æ³¨é‡å…·ä½“å®æ–½å’ŒæŠ€æœ¯ç»†èŠ‚ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºï¼Œåœ¨æŠ€æœ¯å¼€å‘ã€æ•°æ®åˆ†æã€å·¥ç¨‹å®æ–½ç­‰é¢†åŸŸæœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚',
                'q4': 'ä½ æ“…é•¿ç³»ç»Ÿæ€è€ƒå’ŒæŠ€æœ¯åè°ƒï¼Œèƒ½å¤Ÿæœ‰æ•ˆæ•´åˆèµ„æºå’Œç®¡ç†æµç¨‹ï¼Œåœ¨äº§å“ç®¡ç†ã€è¿è¥ä¼˜åŒ–ã€é¡¹ç›®ç®¡ç†ç­‰é¢†åŸŸæœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚',
                'center': 'ä½ åœ¨å„ä¸ªç»´åº¦ç›¸å¯¹å¹³è¡¡ï¼Œé€‚åº”æ€§å¼ºï¼Œèƒ½å¤Ÿæ ¹æ®æƒ…å¢ƒçµæ´»è°ƒæ•´ã€‚å»ºè®®æ˜ç¡®1-2ä¸ªé‡ç‚¹å‘å±•æ–¹å‘ã€‚'
            };
            return descriptions[quadrant] || descriptions.center;
        }
        
        function getQuadrantStrengths(quadrant) {
            const strengths = {
                'q1': ['å¼ºå¤§çš„æ¦‚å¿µåŒ–å’ŒæŠ½è±¡æ€ç»´èƒ½åŠ›', 'æ“…é•¿ä»å¤æ‚ä¿¡æ¯ä¸­å‘ç°æ¨¡å¼', 'å…³æ³¨ç”¨æˆ·ä½“éªŒå’Œäººæ–‡ä»·å€¼', 'å–„äºåˆ¶å®šé•¿æœŸæˆ˜ç•¥'],
                'q2': ['å‡ºè‰²çš„æ²Ÿé€šå’Œäººé™…åè°ƒèƒ½åŠ›', 'æ“…é•¿è§£å†³å…·ä½“é—®é¢˜', 'èƒ½å¤Ÿæœ‰æ•ˆæ¿€åŠ±å’Œå½±å“ä»–äºº', 'å¼ºå¤§çš„åŒç†å¿ƒ'],
                'q3': ['å¼ºå¤§çš„æŠ€æœ¯å®æ–½å’Œæ“ä½œèƒ½åŠ›', 'æ³¨é‡ç»†èŠ‚å’Œè´¨é‡æŠŠæ§', 'æ“…é•¿è§£å†³å…·ä½“æŠ€æœ¯é—®é¢˜', 'å­¦ä¹ æ–°å·¥å…·é€Ÿåº¦å¿«'],
                'q4': ['å¼ºå¤§çš„ç³»ç»Ÿæ€ç»´å’Œæµç¨‹ä¼˜åŒ–èƒ½åŠ›', 'æ“…é•¿åè°ƒèµ„æºå’Œç®¡ç†é¡¹ç›®', 'æŠ€æœ¯ç†è§£æ·±å…¥ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå¯¹æ¥', 'æ³¨é‡æ•ˆç‡å’Œç»“æœå¯¼å‘'],
                'center': ['é€‚åº”æ€§å¼ºï¼Œèƒ½åœ¨ä¸åŒç¯å¢ƒä¸­å·¥ä½œ', 'æ€ç»´çµæ´»ï¼Œèƒ½å¤šè§’åº¦æ€è€ƒ', 'ç»¼åˆèƒ½åŠ›è¾ƒä¸ºå‡è¡¡', 'å­¦ä¹ æ–°é¢†åŸŸéšœç¢å°']
            };
            return strengths[quadrant] || strengths.center;
        }
        
        // ==================== æŠ¥å‘Šç”Ÿæˆ ====================
        function generateReport() {
            const container = document.getElementById('report-container');
            const q = testData;
            const date = new Date().toLocaleDateString('zh-CN');
            
            container.innerHTML = `
                <!-- ç¬¬1é¡µï¼šå°é¢ -->
                <div class="report-page report-cover">
                    <h1 style="font-size: 2.5rem; margin-bottom: 20px;">è¶…çº§ä¸ªä½“å‘å±•æŠ¥å‘Š</h1>
                    <h2 style="font-size: 1.5rem; margin-bottom: 40px; opacity: 0.9;">${q.quadrantName}çš„å‘å±•è·¯å¾„</h2>
                    <div style="margin: 40px 0;">
                        <p style="font-size: 1.1rem; margin: 10px 0;">å®šä½ç±»å‹ï¼š${q.quadrantName}</p>
                        <p style="font-size: 1.1rem; margin: 10px 0;">ç»¼åˆæ½œåŠ›è¯„åˆ†ï¼š${q.score}/100</p>
                        <p style="font-size: 1.1rem; margin: 10px 0;">æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š${date}</p>
                    </div>
                </div>
                
                <!-- ç¬¬2é¡µï¼šæ‰§è¡Œæ‘˜è¦ -->
                <div class="report-page">
                    <h2 style="color: #4f46e5; margin-bottom: 20px; text-align: center;">æ‰§è¡Œæ‘˜è¦</h2>
                    <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="color: #1f2937; margin-bottom: 15px;">ä½ çš„å››è±¡é™å®šä½</h3>
                        <p style="color: #4b5563; line-height: 1.6; margin-bottom: 15px;">
                            åŸºäºæµ‹è¯„ç»“æœï¼Œä½ çš„å®šä½æ˜¯ï¼š<span style="color: ${q.color}; font-weight: bold;">${q.quadrantName}</span>
                        </p>
                        <p style="color: #4b5563; line-height: 1.6;">${getQuadrantDescription(q.quadrant)}</p>
                    </div>
                    
                    <div style="text-align: center; margin: 30px 0;">
                        <div class="quadrant-chart" style="margin: 0 auto;">
                            <div style="position: absolute; width: 100%; height: 2px; background: #374151; top: 50%;"></div>
                            <div style="position: absolute; width: 2px; height: 100%; background: #374151; left: 50%;"></div>
                            <div class="quadrant-point" style="left: ${175 + (q.x/8)*155}px; top: ${175 - (q.y/8)*155}px;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- ç¬¬3-5é¡µï¼šå‘å±•å»ºè®®ç­‰ -->
                <div class="report-page">
                    <h2 style="color: #4f46e5; margin-bottom: 20px;">å‘å±•å»ºè®®ä¸è¡ŒåŠ¨è®¡åˆ’</h2>
                    
                    <div style="background: #f0fdf4; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="color: #10b981; margin-bottom: 15px;">ç¬¬1ä¸ªæœˆï¼šè®¤çŸ¥æ·±åŒ–æœŸ</h3>
                        <ul style="color: #4b5563; line-height: 1.6; padding-left: 20px;">
                            <li>æ·±å…¥å­¦ä¹ ${q.quadrantName}çš„å…¸å‹æ¡ˆä¾‹å’Œå·¥ä½œæ–¹æ³•</li>
                            <li>é˜…è¯»3æœ¬ç›¸å…³é¢†åŸŸçš„ç»å…¸ä¹¦ç±</li>
                            <li>å‚åŠ 1æ¬¡ä¸“ä¸šå·¥ä½œåŠæˆ–çº¿ä¸Šè¯¾ç¨‹</li>
                        </ul>
                    </div>
                    
                    <div style="background: #eff6ff; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h3 style="color: #3b82f6; margin-bottom: 15px;">ç¬¬2ä¸ªæœˆï¼šæŠ€èƒ½å¼ºåŒ–æœŸ</h3>
                        <ul style="color: #4b5563; line-height: 1.6; padding-left: 20px;">
                            <li>é’ˆå¯¹æ€§æå‡æ ¸å¿ƒæŠ€èƒ½ï¼Œæ¯å¤©ç»ƒä¹ 1å°æ—¶</li>
                            <li>å®Œæˆ1ä¸ªå°å‹çš„å®è·µé¡¹ç›®</li>
                            <li>å¯»æ‰¾1ä½mentorè¿›è¡Œå®šæœŸäº¤æµ</li>
                        </ul>
                    </div>
                    
                    <div style="background: #fefce8; padding: 20px; border-radius: 10px;">
                        <h3 style="color: #f59e0b; margin-bottom: 15px;">ç¬¬3ä¸ªæœˆï¼šåº”ç”¨æ‹“å±•æœŸ</h3>
                        <ul style="color: #4b5563; line-height: 1.6; padding-left: 20px;">
                            <li>å°†æ‰€å­¦åº”ç”¨åˆ°å®é™…å·¥ä½œæˆ–é¡¹ç›®ä¸­</li>
                            <li>å»ºç«‹ä¸ªäººä½œå“é›†æˆ–æ¡ˆä¾‹åº“</li>
                            <li>è§„åˆ’ä¸‹ä¸€æ­¥çš„é•¿æœŸå‘å±•è·¯å¾„</li>
                        </ul>
                    </div>
                </div>
                
                <!-- æœ€åå‡ é¡µåŒ…å«æ›´å¤šå†…å®¹ -->
                <div class="report-page">
                    <h2 style="color: #4f46e5; margin-bottom: 20px;">æ¨èå­¦ä¹ èµ„æº</h2>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #1f2937; margin-bottom: 10px;">ğŸ“š æ¨èä¹¦ç±</h4>
                        <ul style="color: #4b5563; line-height: 1.8; padding-left: 20px;">
                            <li><strong>ã€Šæ·±åº¦å·¥ä½œã€‹</strong> - åŸ¹å…»æ·±åº¦ä¸“æ³¨èƒ½åŠ›</li>
                            <li><strong>ã€Šå­¦ä¹ ä¹‹é“ã€‹</strong> - æŒæ¡é«˜æ•ˆå­¦ä¹ æ–¹æ³•</li>
                            <li><strong>ã€Šå½±å“åŠ›ã€‹</strong> - æå‡å½±å“å’Œè¯´æœèƒ½åŠ›</li>
                            <li><strong>ã€Šç”¨æˆ·æ€ç»´+ã€‹</strong> - å»ºç«‹ç”¨æˆ·ä¸­å¿ƒæ€ç»´</li>
                        </ul>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h4 style="color: #1f2937; margin-bottom: 10px;">ğŸ“ æ¨èè¯¾ç¨‹</h4>
                        <ul style="color: #4b5563; line-height: 1.8; padding-left: 20px;">
                            <li>Coursera: "Learning How to Learn"ï¼ˆå­¦ä¹ æ–¹æ³•ï¼‰</li>
                            <li>å¾—åˆ°APP: "è¶…çº§ä¸ªä½“"ç³»åˆ—è¯¾ç¨‹</li>
                            <li>çŸ¥ä¹ Live: å„é¢†åŸŸä¸“å®¶åˆ†äº«ä¼š</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 style="color: #1f2937; margin-bottom: 10px;">ğŸ› ï¸ å®ç”¨å·¥å…·</h4>
                        <ul style="color: #4b5563; line-height: 1.8; padding-left: 20px;">
                            <li>Notion - çŸ¥è¯†ç®¡ç†ä¸é¡¹ç›®è§„åˆ’</li>
                            <li>Notion AI - å­¦ä¹ è¾…åŠ©ä¸å†…å®¹ç”Ÿæˆ</li>
                            <li>Flomo - ç¢ç‰‡çŸ¥è¯†è®°å½•</li>
                            <li>Xmind - æ€ç»´å¯¼å›¾ä¸çŸ¥è¯†æ•´ç†</li>
                        </ul>
                    </div>
                </div>
                
                <!-- æœ€åä¸€é¡µåŒ…å«å‡çº§é€‰é¡¹ -->
                <div class="report-page">
                    <div style="text-align: center;">
                        <h2 style="color: #4f46e5; margin-bottom: 20px;">æŒç»­æˆé•¿è·¯å¾„</h2>
                        <p style="color: #6b7280; margin: 20px 0; line-height: 1.6;">
                            å››è±¡é™å®šä½æ˜¯åŠ¨æ€å‘å±•çš„èµ·ç‚¹ï¼ŒçœŸæ­£çš„æˆé•¿åœ¨äºæŒç»­æ¢ç´¢å’Œå®è·µã€‚
                        </p>
                        
                        <!-- åœ¨æŠ¥å‘Šä¸­åµŒå…¥å‡çº§é€‰é¡¹ -->
                        <!-- ç»§ç»­ä¸Šä¸€é¡µçš„ä»£ç  -->

                        <!-- åœ¨æŠ¥å‘Šä¸­åµŒå…¥å‡çº§é€‰é¡¹ -->
                        <div class="upgrade-section" style="margin: 30px 0;">
                            <h3 style="color: #92400e; margin-bottom: 15px;">éœ€è¦ä¸“ä¸šæŒ‡å¯¼ï¼Ÿ</h3>
                            <p style="color: #78350f; margin-bottom: 20px;">
                                å…è´¹æŠ¥å‘Šæä¾›äº†æ–¹å‘ï¼Œä¸“ä¸šé¡¾é—®å¸®ä½ ç»˜åˆ¶ç²¾ç¡®çš„æ–½å·¥å›¾ã€‚
                            </p>
                            
                            <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px auto; max-width: 400px;">
                                <h4 style="color: #d97706; margin-bottom: 15px;">"è¶…çº§ä¸ªä½“"å¯åŠ¨å’¨è¯¢</h4>
                                <p style="color: #4b5563; text-align: left; margin-bottom: 20px;">
                                    <span style="color: #10b981; font-weight: bold;">âœ“</span> 30åˆ†é’Ÿä¸€å¯¹ä¸€æ·±åº¦è§£è¯»æŠ¥å‘Š<br>
                                    <span style="color: #10b981; font-weight: bold;">âœ“</span> å®šåˆ¶90å¤©è¡ŒåŠ¨è®¡åˆ’è¡¨<br>
                                    <span style="color: #10b981; font-weight: bold;">âœ“</span> æ¨èç²¾å‡†å­¦ä¹ èµ„æº<br>
                                    <span style="color: #10b981; font-weight: bold;">âœ“</span> 3æ¬¡é‚®ä»¶è·Ÿè¿›æ”¯æŒ
                                </p>
                                
                                <div style="margin: 20px 0;">
                                    <p style="font-size: 0.9rem; color: #6b7280;">åŸä»·ï¼š<s>299å…ƒ</s></p>
                                    <p style="font-size: 1.5rem; color: #d97706; font-weight: bold;">é™æ—¶ä½“éªŒä»·ï¼š99å…ƒ</p>
                                </div>
                                
                                <p style="font-size: 0.9rem; color: #92400e; margin-top: 15px;">
                                    æ‰«ç æ·»åŠ å¾®ä¿¡ï¼Œå¤‡æ³¨"å’¨è¯¢"å³å¯é¢„çº¦
                                </p>
                            </div>
                        </div>
                        
                        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                            <p style="color: #6b7280; font-size: 0.9rem;">æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š${date}</p>
                            <p style="color: #6b7280; font-size: 0.9rem;">Â© 2024 è¶…çº§ä¸ªä½“å®éªŒå®¤</p>
                        </div>
                    </div>
                </div>
            `;
            
            showPage('page-report');
        }
        
        function printReport() {
            window.print();
        }
        
        // ==================== å’¨è¯¢é¢„çº¦åŠŸèƒ½ ====================
        function showConsultationModal() {
            document.getElementById('consultation-modal').style.display = 'flex';
        }
        
        function closeConsultationModal() {
            document.getElementById('consultation-modal').style.display = 'none';
        }
        
        function submitConsultation() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const time = document.getElementById('time-preference').value;
            
            if (!name || !email) {
                alert('è¯·å¡«å†™å§“åå’Œé‚®ç®±');
                return;
            }
            
            // ä¿å­˜å’¨è¯¢æ•°æ®
            const consultation = {
                id: 'consult_' + Date.now(),
                name: name,
                email: email,
                phone: phone || 'æœªå¡«å†™',
                timePreference: time,
                quadrant: testData.quadrantName,
                score: testData.score,
                timestamp: new Date().toISOString(),
                status: 'pending'
            };
            
            consultationData.push(consultation);
            localStorage.setItem(CONFIG.CONSULTATION_KEY, JSON.stringify(consultationData));
            
            alert('é¢„çº¦æäº¤æˆåŠŸï¼æˆ‘ä»¬å°†åœ¨24å°æ—¶å†…é€šè¿‡é‚®ä»¶ä¸æ‚¨è”ç³»ã€‚');
            
            closeConsultationModal();
        }
        
        // ==================== ç®¡ç†å‘˜åŠŸèƒ½ ====================
        function showAdminPanel() {
            document.getElementById('admin-login-modal').style.display = 'flex';
        }
        
        function closeAdminLoginModal() {
            document.getElementById('admin-login-modal').style.display = 'none';
        }
        
        function loginAdmin() {
            const password = document.getElementById('admin-password').value;
            
            if (password === CONFIG.ADMIN_PASSWORD) {
                // æ›´æ–°ç»Ÿè®¡æ•°æ®
                updateAdminStats();
                // æ˜¾ç¤ºç®¡ç†å‘˜é¢æ¿
                showPage('page-admin');
                closeAdminLoginModal();
            } else {
                alert('å¯†ç é”™è¯¯ï¼');
            }
        }
        
        function updateAdminStats() {
            const today = new Date().toDateString();
            let todayCount = 0;
            let totalScore = 0;
            let q1Count = 0;
            
            allTestData.forEach(item => {
                const itemDate = new Date(item.timestamp).toDateString();
                if (itemDate === today) todayCount++;
                
                totalScore += item.score;
                
                if (item.quadrant === 'q1') q1Count++;
            });
            
            // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
            document.getElementById('total-responses').textContent = allTestData.length;
            document.getElementById('today-responses').textContent = todayCount;
            document.getElementById('avg-score').textContent = allTestData.length > 0 ? 
                Math.round(totalScore / allTestData.length) : 0;
            document.getElementById('q1-count').textContent = q1Count;
            
            // æ›´æ–°æ•°æ®è¡¨æ ¼
            updateDataTable();
        }
        
        function updateDataTable() {
            const tbody = document.getElementById('data-table-body');
            tbody.innerHTML = '';
            
            // åªæ˜¾ç¤ºæœ€è¿‘20æ¡è®°å½•
            const recentData = allTestData.slice(-20).reverse();
            
            recentData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.style.borderBottom = '1px solid #e5e7eb';
                
                const date = new Date(item.timestamp);
                const formattedDate = `${date.getMonth()+1}/${date.getDate()} ${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;
                
                row.innerHTML = `
                    <td style="padding: 12px;">${recentData.length - index}</td>
                    <td style="padding: 12px;">${formattedDate}</td>
                    <td style="padding: 12px;">${item.quadrantName}</td>
                    <td style="padding: 12px;">${item.score}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function exportData(format) {
            let dataStr, fileName, mimeType;
            
            if (format === 'json') {
                dataStr = JSON.stringify(allTestData, null, 2);
                fileName = `super_individual_data_${new Date().toISOString().split('T')[0]}.json`;
                mimeType = 'application/json';
            } else if (format === 'csv') {
                // è½¬æ¢ä¸ºCSVæ ¼å¼
                const headers = ['ID', 'æ—¶é—´', 'è±¡é™', 'åˆ†æ•°', 'Xåæ ‡', 'Yåæ ‡'];
                const csvRows = [headers.join(',')];
                
                allTestData.forEach(item => {
                    const row = [
                        `"${item.id}"`,
                        `"${item.timestamp}"`,
                        `"${item.quadrantName}"`,
                        item.score,
                        item.result?.x || 0,
                        item.result?.y || 0
                    ];
                    csvRows.push(row.join(','));
                });
                
                dataStr = csvRows.join('\n');
                fileName = `super_individual_data_${new Date().toISOString().split('T')[0]}.csv`;
                mimeType = 'text/csv';
            }
            
            const blob = new Blob([dataStr], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert(`æ•°æ®å·²å¯¼å‡ºä¸º${format.toUpperCase()}æ–‡ä»¶: ${fileName}`);
        }
        
        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem(CONFIG.STORAGE_KEY);
                localStorage.removeItem(CONFIG.CONSULTATION_KEY);
                allTestData = [];
                consultationData = [];
                updateAdminStats();
                alert('æ‰€æœ‰æ•°æ®å·²æ¸…ç©ºï¼');
            }
        }
        
        function showWelcomePage() {
            showPage('page-welcome');
        }
        
        function restartTest() {
            if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹æµ‹è¯„å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸¢å¤±ã€‚')) {
                showPage('page-welcome');
            }
        }
        
        // ==================== å·¥å…·å‡½æ•° ====================
        function showResultPage() {
            // è¿™ä¸ªå‡½æ•°åœ¨ completeTest ä¸­è°ƒç”¨
            // æˆ‘ä»¬å·²ç»æœ‰äº† showPage('page-result') çš„è°ƒç”¨
            // è¿™é‡Œç¡®ä¿ç»“æœå†…å®¹è¢«æ­£ç¡®æ˜¾ç¤º
            const resultDiv = document.getElementById('result-content');
            if (resultDiv.innerHTML === '') {
                // å¦‚æœç»“æœå†…å®¹ä¸ºç©ºï¼Œé‡æ–°è®¡ç®—å¹¶æ˜¾ç¤º
                calculateResult();
                const q = testData;
                
                // è®¡ç®—åœ¨å››è±¡é™å›¾ä¸­çš„ä½ç½®
                const chartSize = 350;
                const center = chartSize / 2;
                const xPos = center + (q.x / 8) * (center - 20);
                const yPos = center - (q.y / 8) * (center - 20);
                
                resultDiv.innerHTML = `
                    <div style="text-align: center;">
                        <div class="quadrant-chart">
                            <div style="position: absolute; width: 100%; height: 2px; background: #374151; top: 50%;"></div>
                            <div style="position: absolute; width: 2px; height: 100%; background: #374151; left: 50%;"></div>
                            
                            <div class="quadrant-label q1-label">æˆ˜ç•¥åˆ›æ–°è€…</div>
                            <div class="quadrant-label q2-label">äººé™…å½±å“è€…</div>
                            <div class="quadrant-label q3-label">æŠ€æœ¯æ‰§è¡Œè€…</div>
                            <div class="quadrant-label q4-label">è¿è¥åè°ƒè€…</div>
                            
                            <div class="quadrant-point" style="left: ${xPos}px; top: ${yPos}px;"></div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h2 style="color: ${q.color}; margin-bottom: 10px;">${q.quadrantName}</h2>
                            <div style="font-size: 2.5rem; color: #4f46e5; font-weight: bold; margin: 10px 0;">${q.score}/100</div>
                            <p style="color: #4b5563; max-width: 500px; margin: 0 auto 20px; line-height: 1.6;">
                                ${getQuadrantDescription(q.quadrant)}
                            </p>
                        </div>
                    </div>
                    
                    <div style="background: #f8fafc; padding: 20px; border-radius: 10px; margin-top: 20px; text-align: left;">
                        <h4 style="color: #4f46e5; margin-bottom: 15px;">ä½ çš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</h4>
                        <ul style="color: #4b5563; line-height: 1.6; padding-left: 20px;">
                            ${getQuadrantStrengths(q.quadrant).map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            showPage('page-result');
        }
        
        // åˆå§‹åŒ–æ—¶ç»‘å®šäº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // ç¡®ä¿æ‰€æœ‰å¿…è¦çš„äº‹ä»¶éƒ½å·²ç»‘å®š
            const startBtn = document.getElementById('start-btn');
            if (startBtn) {
                startBtn.addEventListener('click', startTest);
            }
            
            // åŠ è½½æ•°æ®
            loadAllData();
            loadConsultationData();
            
            // å¦‚æœURLä¸­æœ‰å‚æ•°ï¼Œå¯ä»¥åœ¨è¿™é‡Œå¤„ç†
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('admin')) {
                showAdminPanel();
            }
        });
    </script>
</body>
</html>